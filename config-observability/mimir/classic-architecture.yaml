# These values override the default configuration to run Grafana Mimir in classic architecture.
# The "classic" architecture is what Mimir 2.x (mimir-distributed Helm chart version 5.x) used by default.
# In this mode, Grafana Mimir doesn't use Kafka to decouple write and read paths. Instead,
# the distributors push series directly to the ingesters.
mimir-distributed:
  kafka:
    enabled: false

  mimir:
    structuredConfig:
      limits:
        # Limit queries to 500 days. You can override this on a per-tenant basis.
        max_total_query_length: 12000h
        # Adjust max query parallelism to 16x sharding, without sharding we can run 15d queries fully in parallel.
        # With sharding we can further shard each day another 16 times. 15 days * 16 shards = 240 subqueries.
        max_query_parallelism: 240
        # Avoid caching results newer than 10m because some samples can be delayed
        # This presents caching incomplete results
        max_cache_freshness: 10m
        # Maximum number of rules per rule group per-tenant. 0 to disable.
        ruler_max_rules_per_rule_group: 0
        # Maximum number of rule groups per-tenant. 0 to disable.
        ruler_max_rule_groups_per_tenant: 0
      ingest_storage:
        enabled: false
        kafka:
          address: null
          topic: null
          auto_create_topic_default_partitions: null
      distributor:
        remote_timeout: null
      ingester:
        push_grpc_method_enabled: null
  
  minio:
    enabled: true
    consoleIngress:
      enabled: true
      ingressClassName: nginx
      path: /
      hosts:
        - minio.feri-devops-machine.deploy-at.my.id